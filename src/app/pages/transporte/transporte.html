<app-navbar></app-navbar>

<section class="page-hero transporte-hero">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <div class="hero-pill">
            <span class="pill-icon"><i class="fas fa-route"></i></span>
            <span>Movilidad Segura</span>
        </div>
        <h1 class="page-title">
            Transporte Turístico
            <span>Conectamos cada rincón de Andahuaylas contigo</span>
        </h1>
        <p class="page-subtitle">Vehículos modernos, conductores certificados y rutas planificadas para tu comodidad y seguridad.</p>
        
        <div class="hero-stats">
            <div class="stat-item">
                <span class="stat-number">24/7</span>
                <span class="stat-label">Disponibilidad</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">100%</span>
                <span class="stat-label">Seguro de Viaje</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">4.9</span>
                <span class="stat-label">Calificación</span>
            </div>
        </div>
    </div>
</section>

<section class="services-section">
    <div class="container">
        <!-- Filters -->
        <div class="filters-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input 
                    type="text" 
                    placeholder="Buscar ruta, destino o tipo de servicio..." 
                    [ngModel]="searchTerm()"
                    (ngModelChange)="searchTerm.set($event)"
                >
            </div>
            <div class="type-filters">
                @for (type of transportTypes; track type.key) {
                <button 
                    class="filter-btn" 
                    [class.active]="selectedType() === type.key"
                    (click)="setType(type.key)"
                >
                    <i [class]="type.icon"></i> {{ type.label }}
                </button>
                }
            </div>
        </div>

        <!-- Loading State -->
        @if (isLoading()) {
        <div class="loading-state">
            <i class="fas fa-spinner fa-spin fa-2x"></i>
            <p>Buscando mejores rutas...</p>
        </div>
        }

        <!-- Error State -->
        @if (error()) {
        <div class="error-state">
            <i class="fas fa-exclamation-triangle"></i>
            <p>{{ error() }}</p>
        </div>
        }

        <!-- Transport Grid -->
        @if (!isLoading() && !error()) {
        <div class="transport-grid">
            @for (item of filteredTransportes(); track item.$id) {
            <article class="transport-card">
                <div class="card-header">
                    <div class="transport-icon-wrapper">
                        <i [class]="getIconForType(item.tipo)"></i>
                    </div>
                    <div class="transport-badges">
                        <span class="badge-type">{{ item.tipo | titlecase }}</span>
                        @if (item.disponible) {
                        <span class="badge-status">Disponible</span>
                        }
                    </div>
                </div>
                
                <div class="card-body">
                    <h3 class="card-title">{{ item.nombre }}</h3>
                    <p class="card-desc">{{ item.descripcion }}</p>
                    
                    <div class="route-info">
                        <div class="route-point">
                            <i class="far fa-circle"></i>
                            <span>{{ item.origen }}</span>
                        </div>
                        <div class="route-line"></div>
                        <div class="route-point">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>{{ item.destino }}</span>
                        </div>
                    </div>

                    <div class="features-list">
                        @for (feature of getFeatures(item); track feature) {
                        <span class="feature-item"><i class="fas fa-check"></i> {{ feature }}</span>
                        }
                    </div>
                </div>

                <div class="card-footer">
                    <div class="price-block">
                        <span class="currency">S/</span>
                        <span class="amount">{{ item.precio }}</span>
                        <span class="period">/ viaje</span>
                    </div>
                    <a routerLink="/reservas" 
                       [queryParams]="{tipo: 'transport', nombre: item.nombre, precio: item.precio, id: item.$id}"
                       class="btn-book">
                        Reservar <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </article>
            }
            
            <!-- Empty State -->
            @if (filteredTransportes().length === 0) {
            <div class="empty-state">
                <div class="empty-icon"><i class="fas fa-route"></i></div>
                <h3>No encontramos servicios</h3>
                <p>Intenta cambiar los filtros o busca otra ruta.</p>
            </div>
            }
        </div>
        }
    </div>
</section>

<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <h2>¿Necesitas un servicio personalizado?</h2>
            <p>Organizamos transporte privado para grupos grandes, eventos especiales o rutas fuera de lo común.</p>
            <div class="cta-buttons">
                <a routerLink="/contacto" class="btn-primary">Cotizar Servicio Privado</a>
                <a href="https://wa.me/51999999999" target="_blank" class="btn-whatsapp">
                    <i class="fab fa-whatsapp"></i> Contactar por WhatsApp
                </a>
            </div>
        </div>
    </div>
</section>

<app-footer></app-footer>
